<script>
    let isMicrosite = process.env.STANDALONE.toString() == 'true';
    let popupEl;

    const closePopup = () => {
        setTimeout(() => {
            popupEl.style.opacity = 0;
        }, 200);

        setTimeout(() => {
            popupEl.classList.remove('active');
        }, 1000);
    };

    const openPopup = () => {
        popupEl.classList.add('active');
            
        setTimeout(() => {
            popupEl.style.opacity = 1;
        }, 1300);

        setTimeout(() => {
            closePopup();
        }, 5300);
    };

    const handleClick = () => {
        closePopup();
    }

    // OPEN EXTERNALLY
    window['openPopup'] = () => {
        openPopup();
    }

    // CLOSE EXTERNALLY
    window['closePopup'] = () => {
        closePopup();
    }

    function onResize() {
        window.innerWidth > window.innerHeight && closePopup();
    }

    window.onresize = onResize;
    
    document.addEventListener('DOMContentLoaded', function(event) {
        popupEl = document.querySelector('.popup');
    });
</script>

<style lang="scss">
    .popup {
        width: 83vw;
        top: 50%;
        left: 50%;
        padding: 6vw 8.9vw;
        transform: translate(-50%, -40%);
        position: absolute;
        background: rgba(#171717, 0.7);
        z-index: 100;
        display: none;
        opacity: 0;
        transition: 1s ease;

        
        svg {
            width: 100%;
        }
    }

    :global(.microsite .popup.active) {
        // Mobile
        @media only screen and (max-width: 500px) {
            display: block;
            transform: translate(-50%, -55%);
        }
    }

</style>
  
<div on:click={ handleClick } class="popup">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 251 123">
        <defs/>
        <path fill="#fff" d="M10.717 6.244h2.646c2.358 0 3.42.738 3.42 2.178s-1.062 2.178-3.42 2.178h-2.646V6.244zM12.229 16v-.504h-1.224l-.288-.288v-4.104h2.196l3.132 4.392V16h2.556v-.504h-1.854l-3.186-4.392c2.556-.036 3.78-.972 3.78-2.682 0-1.746-1.278-2.682-3.942-2.682H8.647v.504h1.224l.288.288v8.676l-.288.288H8.647V16h3.582zm7.799-3.816c0 2.304 1.71 4.068 4.032 4.068s4.032-1.764 4.032-4.068c0-2.304-1.71-4.068-4.032-4.068s-4.032 1.764-4.032 4.068zm7.506 0c0 1.98-1.458 3.564-3.474 3.564s-3.474-1.584-3.474-3.564S22.044 8.62 24.06 8.62s3.474 1.584 3.474 3.564zm4.738-3.024v3.24c0 2.844 1.602 3.852 3.474 3.852 1.476 0 2.538-.774 3.24-1.854l-.378-.342c-.612.99-1.602 1.674-2.862 1.674-1.548 0-2.934-.792-2.934-3.42V9.16l.288-.288h4.806v-.504H32.83V5.596h-.558v2.772h-2.25v.504h1.962l.288.288zm9.599.522c0 .468.288.738.684.738.396 0 .702-.288.702-.666a.61.61 0 00-.432-.576c.612-.396 1.35-.54 2.268-.54 1.422 0 2.142.702 2.142 2.268v.45l-2.304.396c-2.304.396-3.474 1.08-3.474 2.484 0 1.296 1.026 2.016 2.376 2.016 1.422 0 2.646-.738 3.42-1.818.036 1.188.666 1.818 1.53 1.818.558 0 1.044-.288 1.44-.846l-.324-.36c-.342.486-.666.702-1.116.702-.648 0-1.008-.576-1.008-1.548v-3.294c0-1.89-.936-2.79-2.682-2.79-1.566 0-3.222.558-3.222 1.566zm5.364 4.176c-1.08 1.26-2.016 1.89-3.402 1.89-.918 0-1.818-.504-1.818-1.512 0-1.206 1.26-1.71 2.988-1.998l2.232-.378v1.998zm6.43-4.698v3.24c0 2.844 1.602 3.852 3.474 3.852 1.476 0 2.538-.774 3.24-1.854l-.377-.342c-.613.99-1.602 1.674-2.863 1.674-1.547 0-2.934-.792-2.934-3.42V9.16l.288-.288H59.3v-.504h-5.075V5.596h-.558v2.772h-2.25v.504h1.962l.288.288zm16.367 2.52h-6.588c.216-1.746 1.602-3.06 3.438-3.06 1.818 0 2.898 1.224 3.15 3.06zm.198 3.204l-.324-.396c-.72.792-1.782 1.26-3.024 1.26-2.016 0-3.474-1.584-3.474-3.564h7.218c0-2.304-1.422-4.068-3.744-4.068S62.85 9.88 62.85 12.184c0 2.304 1.71 4.068 4.032 4.068 1.386 0 2.592-.522 3.348-1.368zm13.473 3.402c0 .828.864 1.35 1.728 1.35 1.098 0 1.8-.99 2.934-3.24l3.798-7.524h1.044v-.504h-3.69v.504h1.746l.18.234-3.186 6.426-3.186-6.426.18-.234h1.746v-.504h-3.726v.504h1.044l3.636 7.182c-1.116 2.25-1.566 3.078-2.52 3.078-.396 0-.684-.144-.774-.342.252-.09.432-.306.432-.558 0-.396-.306-.684-.702-.684-.378 0-.684.306-.684.738zm11.201-6.102c0 2.304 1.71 4.068 4.032 4.068s4.032-1.764 4.032-4.068c0-2.304-1.71-4.068-4.032-4.068s-4.032 1.764-4.032 4.068zm7.506 0c0 1.98-1.458 3.564-3.474 3.564s-3.474-1.584-3.474-3.564S96.92 8.62 98.936 8.62s3.474 1.584 3.474 3.564zm7.781-3.816v.504h1.404l.288.288v4.518c-.594 1.134-1.548 2.052-2.934 2.052-1.368 0-2.16-.81-2.16-2.394V8.368h-2.232v.504h1.404l.288.288v4.212c0 1.998 1.08 2.88 2.7 2.88 1.278 0 2.43-.828 2.934-1.854V16h2.232v-.504h-1.404l-.288-.288v-6.84h-2.232zm12.676 1.854c0 .378.306.648.702.648.486 0 .972-.378.972-1.206 0-.882-.576-1.548-1.8-1.548-1.368 0-2.754 1.314-3.744 2.574V8.368h-3.24v.504h2.412l.288.288v6.048l-.288.288h-2.412V16h7.092v-.504h-3.564l-.288-.288V11.41c1.044-1.368 2.52-2.772 3.744-2.772.684 0 1.152.324 1.152.828 0 .054 0 .126-.036.216a.58.58 0 00-.36-.126c-.324 0-.63.252-.63.666zm20.116 2.34c.846.18 1.602.504 1.602 1.44 0 1.098-.9 1.746-2.412 1.746-1.332 0-2.736-.594-3.618-2.304h-.468V16h.504v-1.224l.162-.09c.648.9 1.944 1.566 3.42 1.566 1.926 0 2.952-.936 2.952-2.25 0-1.188-.738-1.674-2.034-1.944l-2.484-.504c-1.152-.234-1.854-.522-1.854-1.386 0-.972.99-1.566 2.358-1.566 1.458 0 2.772.846 3.258 2.196h.468v-2.43h-.504v1.134l-.126.054c-.702-.99-1.926-1.44-3.096-1.44-1.71 0-2.898.846-2.898 2.052 0 1.116.738 1.584 2.34 1.908l2.43.486zm11.542-1.926c0 .378.306.648.684.648.396 0 .72-.324.72-.792 0-1.404-1.368-2.376-3.276-2.376-2.376 0-4.23 1.764-4.23 4.068 0 2.304 1.746 4.068 4.122 4.068 1.422 0 2.664-.522 3.438-1.368l-.324-.396c-.738.792-1.836 1.26-3.114 1.26-2.052 0-3.564-1.584-3.564-3.564s1.62-3.564 3.672-3.564c1.548 0 2.538.702 2.556 1.44-.324-.126-.684.162-.684.576zm11.129-.414c0 .378.306.648.702.648.486 0 .972-.378.972-1.206 0-.882-.576-1.548-1.8-1.548-1.368 0-2.754 1.314-3.744 2.574V8.368h-3.24v.504h2.412l.288.288v6.048l-.288.288h-2.412V16h7.092v-.504h-3.564l-.288-.288V11.41c1.044-1.368 2.52-2.772 3.744-2.772.684 0 1.152.324 1.152.828 0 .054 0 .126-.036.216a.58.58 0 00-.36-.126c-.324 0-.63.252-.63.666zm11.345 1.458h-6.588c.216-1.746 1.602-3.06 3.438-3.06 1.818 0 2.898 1.224 3.15 3.06zm.198 3.204l-.324-.396c-.72.792-1.782 1.26-3.024 1.26-2.016 0-3.474-1.584-3.474-3.564h7.218c0-2.304-1.422-4.068-3.744-4.068s-4.032 1.764-4.032 4.068c0 2.304 1.71 4.068 4.032 4.068 1.386 0 2.592-.522 3.348-1.368zm10.498-3.204h-6.588c.216-1.746 1.602-3.06 3.438-3.06 1.818 0 2.898 1.224 3.15 3.06zm.198 3.204l-.324-.396c-.72.792-1.782 1.26-3.024 1.26-2.016 0-3.474-1.584-3.474-3.564h7.218c0-2.304-1.422-4.068-3.744-4.068s-4.032 1.764-4.032 4.068c0 2.304 1.71 4.068 4.032 4.068 1.386 0 2.592-.522 3.348-1.368zm4.901-4.194c.594-1.134 1.548-2.052 2.934-2.052 1.368 0 2.16.81 2.16 2.394v4.176l-.288.288h-1.404V16h3.924v-.504h-1.404l-.288-.288v-4.212c0-1.998-1.08-2.88-2.7-2.88-1.278 0-2.43.828-2.934 1.854V8.368h-2.232v.504h1.404l.288.288v6.048l-.288.288h-1.404V16h3.924v-.504h-1.404l-.288-.288V10.69zm22.581-1.998c0-2.502 1.512-3.456 3.168-3.456 1.332 0 2.124.45 2.376 1.296-.468-.036-.756.27-.756.612 0 .396.288.63.684.63.378 0 .702-.324.702-.864 0-1.314-1.278-2.196-3.006-2.196-1.926 0-3.708 1.134-3.708 3.978h-2.61v.504h2.322l.288.288v5.724l-.288.288h-2.322V16h7.002v-.504h-3.564l-.288-.288V9.484l.288-.288h3.546v-.504h-3.834zm7.889 3.492c0 2.304 1.71 4.068 4.032 4.068s4.032-1.764 4.032-4.068c0-2.304-1.71-4.068-4.032-4.068s-4.032 1.764-4.032 4.068zm7.506 0c0 1.98-1.458 3.564-3.474 3.564s-3.474-1.584-3.474-3.564 1.458-3.564 3.474-3.564 3.474 1.584 3.474 3.564zm9.76-1.962c0 .378.306.648.702.648.486 0 .972-.378.972-1.206 0-.882-.576-1.548-1.8-1.548-1.368 0-2.754 1.314-3.744 2.574V8.368h-3.24v.504h2.412l.288.288v6.048l-.288.288h-2.412V16h7.092v-.504h-3.564l-.288-.288V11.41c1.044-1.368 2.52-2.772 3.744-2.772.684 0 1.152.324 1.152.828 0 .054 0 .126-.036.216a.58.58 0 00-.36-.126c-.324 0-.63.252-.63.666zM47.975 33.068c.558-1.458 1.638-2.43 3.258-2.43 1.89 0 3.204 1.566 3.204 3.546 0 1.98-1.314 3.546-3.204 3.546-1.62 0-2.7-.972-3.258-2.43v-2.232zm0 4.932v-1.8c.63 1.314 1.836 2.052 3.258 2.052 2.178 0 3.762-1.764 3.762-4.068 0-2.304-1.584-4.068-3.762-4.068-1.422 0-2.628.738-3.258 2.052v-5.202h-2.232v.504h1.404l.288.288v9.45l-.288.288h-1.224V38h2.052zm16.529-4.32h-6.588c.216-1.746 1.602-3.06 3.438-3.06 1.818 0 2.898 1.224 3.15 3.06zm.198 3.204l-.324-.396c-.72.792-1.782 1.26-3.024 1.26-2.016 0-3.474-1.584-3.474-3.564h7.218c0-2.304-1.422-4.068-3.744-4.068s-4.032 1.764-4.032 4.068c0 2.304 1.71 4.068 4.032 4.068 1.386 0 2.592-.522 3.348-1.368zm8.573-2.322c.846.18 1.601.504 1.601 1.44 0 1.098-.9 1.746-2.412 1.746-1.332 0-2.736-.594-3.617-2.304h-.468V38h.503v-1.224l.162-.09c.648.9 1.945 1.566 3.42 1.566 1.927 0 2.953-.936 2.953-2.25 0-1.188-.739-1.674-2.035-1.944l-2.484-.504c-1.151-.234-1.853-.522-1.853-1.386 0-.972.99-1.566 2.358-1.566 1.457 0 2.771.846 3.257 2.196h.469v-2.43h-.505v1.134l-.125.054c-.703-.99-1.926-1.44-3.096-1.44-1.71 0-2.899.846-2.899 2.052 0 1.116.739 1.584 2.34 1.908l2.43.486zm6.952-3.402v3.24c0 2.844 1.602 3.852 3.474 3.852 1.476 0 2.538-.774 3.24-1.854l-.378-.342c-.612.99-1.602 1.674-2.862 1.674-1.548 0-2.934-.792-2.934-3.42v-3.15l.288-.288h4.806v-.504h-5.076v-2.772h-.558v2.772h-2.25v.504h1.962l.288.288zm27.063 2.52h-6.588c.216-1.746 1.602-3.06 3.438-3.06 1.818 0 2.898 1.224 3.15 3.06zm.198 3.204l-.324-.396c-.72.792-1.782 1.26-3.024 1.26-2.016 0-3.474-1.584-3.474-3.564h7.218c0-2.304-1.422-4.068-3.744-4.068s-4.032 1.764-4.032 4.068c0 2.304 1.71 4.068 4.032 4.068 1.386 0 2.592-.522 3.348-1.368zm10.553-6.012h1.44v-.504h-4.014v.504h1.566l.18.234-2.412 2.61-2.412-2.61.18-.234h1.566v-.504h-4.086v.504h1.44l2.97 3.222-3.15 3.402h-1.44V38h4.014v-.504h-1.566l-.18-.234 2.628-2.844 2.628 2.844-.18.234h-1.566V38h4.086v-.504h-1.44l-3.186-3.438 2.934-3.186zm4.811 2.196c.558-1.458 1.638-2.43 3.258-2.43 1.89 0 3.204 1.566 3.204 3.546 0 1.98-1.314 3.546-3.204 3.546-1.62 0-2.7-.972-3.258-2.43v-2.232zm0 3.132c.63 1.314 1.836 2.052 3.258 2.052 2.178 0 3.762-1.764 3.762-4.068 0-2.304-1.584-4.068-3.762-4.068-1.422 0-2.628.738-3.258 2.052v-1.8H120.8v.504h1.224l.288.288v9.432l-.288.288H120.8v.504h4.644v-.504h-2.304l-.288-.288V36.2zm16.528-2.52h-6.588c.216-1.746 1.602-3.06 3.438-3.06 1.818 0 2.898 1.224 3.15 3.06zm.198 3.204l-.324-.396c-.72.792-1.782 1.26-3.024 1.26-2.016 0-3.474-1.584-3.474-3.564h7.218c0-2.304-1.422-4.068-3.744-4.068s-4.032 1.764-4.032 4.068c0 2.304 1.71 4.068 4.032 4.068 1.386 0 2.592-.522 3.348-1.368zm9.851-4.662c0 .378.306.648.702.648.486 0 .972-.378.972-1.206 0-.882-.576-1.548-1.8-1.548-1.368 0-2.754 1.314-3.744 2.574v-2.322h-3.24v.504h2.412l.288.288v6.048l-.288.288h-2.412V38h7.092v-.504h-3.564l-.288-.288V33.41c1.044-1.368 2.52-2.772 3.744-2.772.684 0 1.152.324 1.152.828 0 .054 0 .126-.036.216a.58.58 0 00-.36-.126c-.324 0-.63.252-.63.666zm8.699 4.986v-6.84h-4.032v.504h3.204l.288.288v6.048l-.288.288h-3.204V38h7.524v-.504h-3.204l-.288-.288zm-1.368-9.954c0 .45.36.81.81.81a.81.81 0 00.828-.81.815.815 0 00-.828-.828.81.81 0 00-.81.828zm14.71 6.426h-6.588c.216-1.746 1.602-3.06 3.438-3.06 1.818 0 2.898 1.224 3.15 3.06zm.198 3.204l-.324-.396c-.72.792-1.782 1.26-3.024 1.26-2.016 0-3.474-1.584-3.474-3.564h7.218c0-2.304-1.422-4.068-3.744-4.068s-4.032 1.764-4.032 4.068c0 2.304 1.71 4.068 4.032 4.068 1.386 0 2.592-.522 3.348-1.368zm4.901-4.194c.594-1.134 1.548-2.052 2.934-2.052 1.368 0 2.16.81 2.16 2.394v4.176l-.288.288h-1.404V38h3.924v-.504h-1.404l-.288-.288v-4.212c0-1.998-1.08-2.88-2.7-2.88-1.278 0-2.43.828-2.934 1.854v-1.602h-2.232v.504h1.404l.288.288v6.048l-.288.288h-1.404V38h3.924v-.504h-1.404l-.288-.288V32.69zm15.215-.054c0 .378.306.648.684.648.396 0 .72-.324.72-.792 0-1.404-1.368-2.376-3.276-2.376-2.376 0-4.23 1.764-4.23 4.068 0 2.304 1.746 4.068 4.122 4.068 1.422 0 2.664-.522 3.438-1.368l-.324-.396c-.738.792-1.836 1.26-3.114 1.26-2.052 0-3.564-1.584-3.564-3.564s1.62-3.564 3.672-3.564c1.548 0 2.538.702 2.556 1.44-.324-.126-.684.162-.684.576zm11.776 1.044h-6.588c.216-1.746 1.602-3.06 3.438-3.06 1.818 0 2.898 1.224 3.15 3.06zm.198 3.204l-.324-.396c-.72.792-1.782 1.26-3.024 1.26-2.016 0-3.474-1.584-3.474-3.564h7.218c0-2.304-1.422-4.068-3.744-4.068s-4.032 1.764-4.032 4.068c0 2.304 1.71 4.068 4.032 4.068 1.386 0 2.592-.522 3.348-1.368z"/>
        <g class="popup-icon">
            <path stroke="#fff" stroke-width=".7" d="M99.164 77.703l26.37-15.225 25.302 43.825-26.37 15.224z"/>
            <path stroke="#fff" stroke-width=".7" d="M104.548 79.698l19.699-11.373 20.496 35.5-19.699 11.373zM99.402 101.394c0 13.055 11.101 17.407 15.775 17.407M99.404 101.394v-2.749"/>
            <path stroke="#fff" stroke-width=".7" d="M95 104.105l4.424-5.46 4.339 5.534M150.598 82.155c0-13.055-11.101-17.407-15.775-17.407M150.596 82.155v2.749"/>
            <path stroke="#fff" stroke-width=".7" d="M155 79.444l-4.424 5.46-4.339-5.534"/>
        </g>
    </svg>
</div>
